<div class="space-y-8">
  
  <mat-card class="mat-elevation-z8">
    <mat-card-header class="calendar-header">
      <button mat-icon-button (click)="previousMonth()" aria-label="Previous Month">
        <mat-icon>chevron_left</mat-icon>
      </button>
      <mat-card-title class="mat-subheading-2">{{ displayMonth() }}</mat-card-title>
      <button mat-icon-button (click)="nextMonth()" aria-label="Next Month">
        <mat-icon>chevron_right</mat-icon>
      </button>
    </mat-card-header>

    <mat-card-content>
      <div class="calendar-weekdays">
        @for (day of weekdays; track day) {
          <div class="weekday-label">{{ day }}</div>
        }
      </div>

      <div class="calendar-grid">
        @for (week of calendarDays(); track $index) {
          @for (day of week; track day) {
            @if (day) {
              <div
                (click)="handleDayClick(getClassesForDay(day))"
                class="calendar-day-cell"
                [class.is-today]="isToday(day)"
                [class.has-classes]="getClassesForDay(day).length > 0"
              >
                <div class="day-number">{{ day.getDate() }}</div>

                @if (getClassesForDay(day).length > 0) {
                  <div class="class-list">
                    @for (cls of getClassesForDay(day); track cls.id) {
                      <div class="class-item"
                           [class.is-canceled]="cls.isCanceled"
                           [title]="cls.isCanceled ? 'CANCELED: ' + cls.location : cls.location + ' at ' + formatTime(cls.date)">
                          @if (cls.isCanceled) {
                            CANCELED
                          } @else {
                            <span class="class-time-display">{{ formatTime(cls.date) }}</span>
                            <span class="class-location-display">{{ cls.location }}</span>
                          }
                      </div>
                    }
                  </div>
                }
              </div>
            } @else {
              <div class="calendar-day-cell empty-cell"></div>
            }
          }
        }
      </div>
    </mat-card-content>
  </mat-card>
</div>